


无线路由器被蹭网后，有被黑的风险吗？ - 网络安全 - 知乎






--------------------Link http://www.zhihu.com/question/23061570 ----------------------





--------------------Detail----------------------

如果路由器被会技术的人蹭网后，他会不会威胁到我，或者能够黑了我？或者路由器被恶意的陌生人连接后，他们能做什么？

-------------------------answer 0 via  -------------------------


其实这个问题可以理解为：蹭网之后，能做些什么？《碎片 2.他们》：他们总是安静的看着背后那些不为人知的秘密。不少人的八卦心窥探欲还是很强烈的，强烈到让人恐惧。所以很多人喜欢看一些八卦文章，比如：如何优雅的窥探别人？通常这样的文章很容易火起来，因为不少人都喜欢看而且百看不厌。最近路由安全沸沸扬扬，可以翻阅我微信公众号历史文章查看关于路由安全的文章以及央视当时的采访。鉴于天时地利人和，最后我成功的在现实生活中上演了这样一场精彩好戏，为了满足众人的欲望，我就写成故事。大家好好琢磨琢磨蹭网之后，我们还能做些什么？声明： 这是一个虚构故事，图片均加万恶马赛克。———————记忆中隔壁是一个还算不错的妹子，那天Z来找我的时候恰巧碰到了，进屋后跑到我耳边说：“隔壁那个妹子你能不能要到微信，我觉得挺不错的呢~” 这么三俗的场景竟然发生在我的身边，我说等两天我给你消息。入口既然是住在隔壁的年轻人，必然不可缺少的就是路由器，于是我打算从路由器当做入口开始这次旅程，将wifi打开后发现了三个信号，我首先选择这个名字非常独特的路由： ** LOVE **根据名字** LOVE **可大概看出两个人名，应该是男朋友，想到这心里为Z君凉了一半。找到疑似对方入口的地方就好说了，翻出minidwep（一款linux下破解wifi密码的工具）导入部分密码字典，开始进行爆破。因对方使用WPA2加密方式，所以只能使用暴力破解方式进入，WEP则目前可以直接破解密码，所以破解WPA2加密方式的路由基本上成功率取决于黑客手中字典的大小。喝了杯咖啡回来，发现密码已经出来了：198707**，于是愉快的连接了进去。困难成功连接到对方路由后，下面我需要做的就是连接路由的WEB管理界面（进入WEB路由管理界面后便可以将路由DNS篡改、查看DHCP客户端连接设备以及各种功能）。查看网段后开始访问路由器WEB管理界面，发现女神竟然机智的修改了默认登录帐号密码。TP-LINK W89841N，通过路由设备漏洞进入失败后，想必只能使用暴力美学了。通过抓取登录路由器的请求，然后遍历帐号密码发送请求查看返回数据包大小则判断是否登录成功，抓到的GET请求如下：其中：Authorization: Basic YWRtaW46YWRtaW4= 为登录的帐号密码使用Base64解密开查看内容：admin:admin于是我编写了一个python脚本将字典中的密码与“admin:”进行组合然后进行base64加密，进行破解。十一点的钟声响起，发现密码已经成功爆破出来，成功登录：查看设备连接列表，发现只有孤零零的自己，看来女神早已歇息，等待时机。时机第二天晚饭过后，登录路由管理界面，这时已经有好几个设备了，时机到了：客户端名	android-b459ce5294bd721fandroid-44688379be6b9139	**********iPhone	******-iPad******-PC我统计了一下，设备为两个安卓设备、一部Iphone、一个ipad、一台个人PC。从iphone\ipad\pc命名来看，我开始的猜测没错，**确实是路由主人的名字，直觉告诉我非常大的可能这个路由的主人就是Z所心仪的女神。首先测试两台安卓设备，发现其中一台开放端口很多，隐隐约约中感觉是一台小米盒子或者百度影棒这种产品，这样事情就变得有趣了，因为控制电视可就有机会了。使用ARP嗅探安卓开放端口较多的设备，果然是一个影视盒子：最后基本摸清：电视使用影视盒子，iphone，ipad以及一台个人电脑。寻找找到了那么多有趣的东西，但我仍然没有忘记Z让我帮忙的事情，于是便开始对iphone进行了嗅探。嗅探不一会便找到了有趣的东西，女神的照片在她查看自己相册的时候已经被嗅探到，于是我将照片发给了Z，他已经激动的语无伦次了。之后我仍然在等待机会，寻找到对方的微信以便我完成Z的愿望，希望出现了。查看流量日志的时候我发现她在刷新浪微博，于是根据URL很方便的找到了微博：看到生日让我想起了wifi连接密码，原来是她的出生日期，心想把微信找到就可以让Z安心了。通过女神新浪微博个性化域名地址和获取到信息加以组合，开始猜测微信帐号，很快便搞定了：将Z的心愿完成后，回过头发现还有很多有趣的事情没做，怎能轻易结束。电视随着时代的进步科技的发展，互联网逐渐到了物联网层度，从电视使用各种智能盒子便可以看出。影视盒子通常为了方便调试而开启远程调试端口，盒子究竟安全吗？去年腾讯安全送的小米盒子让我有幸好好研究一番，扫描端口后发现各种各样的端口大开，其中最有趣的就是5555端口（adb远程调试），使用adb connect ip 直接可连接设备进行远程调试。虽然是Z的女神，但是我想也可以调侃一番，于是我随手写了一个安卓APK程序。adb远程连接到盒子，然后adb install远程安装apk，最后使用am start -n ***进行远程启动。我本地使用Genymotion建立android模拟器进行测试：当输入am stat - n *** 敲击回车的那一刹那，脑海中曾想象过千万种女神的表情。但我始终没有忍下心来给电视播放爱情动作片。账户微博、人人、淘宝等等凡是登录过后的帐号全部劫持，通过劫持后的帐号又能看到许多表面看不到的东西。于是理所当然的账户全部被劫持掉了，当然我并没有去翻阅什么东西，窥探欲早已麻痹。联系我想是时候做一个结束了，当然故事过程中还有很多有趣而又精彩的东西实在无法用言语来表达。于是我没有恶意的拿她的微博发了一条消息：hey,test通过MITM中间人我又向网页中注入了javascript，大概是这样的：alert(/早点休息，QQ:***/);当然这个QQ是我为了取得对方最后联系而注册的：—————————追溯源头，其实无非就是很常见的蹭网，连接wifi之后设备处于同一个局域网中，于是才能做出那么多有趣的事情，上面这个故事中我未曾有过恶意以及DNS劫持，那么我通过路由究竟控制或者得到了哪些信息：微博微信人人网QQ号码手机号（淘宝获取）照片电视More常说不要连接陌生公开WIFI，有点儿安全意识。不是没办法黑你，只是你没有被黑的价值。但是人们总是毫不在意，常说我本来就没啥价值。这样放弃治疗的人令你头疼。防御作为小白用户，下面几点做到的越多，你就越安全：1、路由器连接密码要复杂一点，比如testak47521test要比ak47521好很多2、赶紧把路由器管理后台的帐号和密码改掉。90% 的懒人还在 admin admin3、不要告诉不可信人员你的 Wi-Fi 密码。4、移动设备不要越狱不要 ROOT，ROOT/越狱后的设备等于公交车随便上5、常登陆路由器管理后台，看看有没有连接不认识的设备连入了 Wi-Fi，有的话断开并封掉 Mac 地址。封完以后马上修改 Wi-Fi 密码和路由器后台帐号密码。6、绑定IP MAC地址7、More上面这些方法都搜索的到，防御ARP劫持嗅探很简单，电脑上装个杀软基本就差不多，被攻击劫持时候会弹出警告，但是人们却丝毫不当回事儿，出现弹框就把杀软给关掉了，继续上网冲浪。至于手机上的杀软，还真没啥用，劫持嗅探样样不拦截。最后Z请我吃了一顿大餐 —— 热干面————————微信公众号：Evil-say关于这个世界，“不为人知”的事情太多了，不定期分享关于黑客、互联网、各种观点。


-------------------------answer 1 via  -------------------------


感觉大家说的都是操作层面的，我尝试回答一下原理层面的事情吧，可以只看重点。首先明确一点：所谓无线网，它就是直接在空气中通过无线电波进行传输的网络，很显然，这意味着所有在同一个空间内的设备都能接收到无线电波。这里是第一个重点：所有在同一空间内的设备都能接收到通过该路由器上网的所有数据。补充: 在有线网中其实类似，底层集线器基本上都是广播模式，交换机的话则可以进行端口镜像，攻击者是可以很容易拿到连在同一个交换机上的其他设备数据。那么拿到数据是不是马上就能盗取信息呢？ 答案是否定的，这里就是无线网密码的用处了。设置密码之后，所有数据都会基于该密码加密，拿不到密码的人是没有办法解密的。不过与此同时，意味着没有密码/密码给出去的话，基本上就是裸奔了，这就是为什么大家会强调1.不要使用公共wifi2.不要随便透露wifi密码。感谢 @秋翎 的提醒， 在WPA加密方式的情况下，即使是相同的密码，不同的用户与路由器通信用的密钥是不同的，这种情况下安全性会略好一点。 不过更厉害的工具(例如wireshark)会通过抓取密钥交换的握手协议数据来计算出不同的用户使用的密钥，然后依旧可以解密出相应的数据。 这里是第二个重点：如果你使用公共wifi/把密码给了别人，那么意味着你的网络处于裸奔状态，数据可以全部被抓取&篡改设了密码是不是一定安全呢？答案也不一定，因为密码是可以被破解的，那么这里可以又得到第三个重点：如果你使用了较弱的密码(如:88888888)或者采取了不够安全的加密方式(WEP)，那么密码很容易破解，你的网络还是会裸奔考虑到答主提到蹭网，说明已经是裸奔的状态了，这种情况下，蹭网者可以做什么呢？由于网络协议最初设计的局限性，最基本的tcp/ip到http都是明文的，那么带来两类大的问题。一是数据很容易伪造，二是数据很容易监听。首先讨论数据伪造，其他答主提到的arp欺骗，dns欺骗，本质上就是伪造假数据来做到的。在wifi这种开放条件下，你的设备接收所有的数据，然后看到欺骗的报文，是无力识别的（因为长得跟正常报文其实是一样的）。这样的话，你的设备就相信了假报文里面的内容，然后就很容易被骗去假支付宝，假银行什么的网站了。其次是数据监听，蹭网的人只要开一个接收器，你通过http访问的所有数据（也就是一般浏览网站的数据）就很容易被他都接收然后看到了，你的隐私一览无遗。而且这个技术极其简单，只要任意一台机器，打开wireshark，开启混杂模式，就可以抓取了。这里是第四个重点：网络裸奔的情况下，蹭网者很容易监听你的所有明文数据，稍微技术好一点的人则可以伪造数据，来进行更多的攻击手段，因此网络裸奔极其危险。当然，这个问题如此严重，设计协议的人不会坐视不理。因此ssl协议就被设计出来了（也就是其他人提到的https），他的原理就是利用了一些密码学的机制，让服务器端提供一个可信的证书，保证了通信两端可以安全地协商一个加密方式，然后把数据全部加密传输。不管是伪造还是监听，面对这个协议都无法奏效，在这种情况下基本就是安全的了。这里是第五个重点：裸奔的情况下还有一种情况是安全的：那就是访问证书可信的https网站，这里证书可信非常重要，浏览器提示不可信的证书通常可能是攻击者伪造的。总结：由于无线网络的开放性和基于明文的网络协议，面对蹭网者各种攻击和监听，基本无能为力，唯一可靠的是提供可信证书的https网站。 最后考虑到国内大量网站都没有用https…… 被蹭网的话，就自求多福吧！PS: 涉及背景知识较多，部分内容进行了简化描述，发现bug的知友请尽情拍我！参考资料：计算机网络原理(重点: 802.11、http、ssl/tls)WPA协议相关:Wi-Fi Protected Accessnetworking - Can two users on an 802.11n network with WPA/WPA2 intercept each other's traffic?


-------------------------answer 2 via  -------------------------


fly: 被人蹭网之后除了蹭网这个损失外，会不会被蹭网的人入侵电脑？


-------------------------answer 3 via  -------------------------


我知道你们都在看一楼那个破解女神的路由器密码。他是用minidwep暴力破解出来的，说说我的看法吧。随手一写没什么条理性，看看就好。先来写写怎么得到别人的路由器密码。首先，破解路由器密码，没这么容易，也没这么难。wep加密现在基本上已经不存在了，都是wpa-psk和wpa2-psk，如果是很复杂的密码，用字典是跑不出来的，但是这真的就安全了？你们应该听说过一个东西叫做wifislax吧，怎么用，自己百度一下就好，但是这个貌似是西班牙语的，略蛋疼。你们应该还听说过钓鱼吧。另外，还有一个东西叫做大功率天线，有的是平板状的，方向性好，我就讲到这，你们领会一下就好。要是真的认真研究这些东西，只要你有合适的网卡，不用两天，你就可以接管邻居的路由器。另外，还要防一个东西，叫做wifi万能钥匙，我很喜欢这个东西，因为它能很方便的连上别人的wifi。为什么呢？因为很多它很方便，有很多人都在用，他们在用的时候，就不知不觉的把自己的wifi密码泄露出去了，这也是它的wifi密码数据库如此庞大的原因。我用这个，从来不让他自动向服务器上传数据，我家的wifi密码在它的数据库里没有，所以我不担心。另外我在手机上设置了它的联网权限，只允许它数据联网，是不是有点卸磨杀驴的感觉？用它连上别人的网之后，用re管理器去查看密码文件，然后，就没什么然后了。在身边，小白太多，所以他们意识不到wifi万能钥匙的坑人的地方，他们也不会经常改密码，所以，hhhhhhhh，不用多说了吧。安卓机，root之后是有优势的，不过用不好，绝对GG。我再简单说说，用一台root了的安卓手机蹭了别人的网，能干什么。首先，要知道，安卓手机有一系列的神器。这是一个安装神器用的工具，自己看图。hhhhhh，剩下的不用说了吧，自己搜一下就可以了，怎么搜，百度一下能死啊？！！当然会死！！！！那就用必应！//最后还要黑一下百度，虽然魏泽西事件的风波已经过去了。为什么我这么反感百度，因为魏泽西是我直系的学长，还有百度，真的不好用。。。。。。。


-------------------------answer 4 via  -------------------------


徒劳：关闭SSID广播，有害无益。绑定MAC地址，朋友来家里玩上网很麻烦，还可能乌龙指把自己屏蔽了只好重置路由。。。必须做的：WPA2-PSK强密码，越长越好，越没规律越好。当然没必要用“O9ockOtiSOTNwkcop3Iv”这种级别的密码，不方便也没必要，但最好还是不要用生日、手机号、常见单词、拼音。。。。路由器登录密码一定得改，一定得。。。越长越复杂越好，然后记下来存个邮箱里之类的。如果路由器有端口隔离，可以考虑使用，当然会很不方便，自己权衡。定期更换密码，你看安全和方便总是对立的。。


-------------------------answer 5 via  -------------------------


好奇，怎么嗅探得到微博密码，现在登录不是大都https了么


-------------------------answer 6 via  -------------------------


“路由器DNS劫持”问题的说明：近期部分媒体报道“路由器DNS劫持”问题，引起一些用户的关注和担忧，特作以下说明：1.TP-LINK早前已关注并解决了该问题，目前在售的所有TP-LINK产品均已具备反劫持能力，用户可以放心购买和使用；2.不要轻信任何安全软件。不管使用哪家的路由器，应对此问题唯一直接有效的防范方法是：不使用厂商出厂默认的管理员用户名和密码，一定要修改成自己编的；（TP-LINK产品已取消默认管理员用户名密码机制，并限制密码尝试次数，用户必须自己编写管理员密码。不要编成"admin"。）3.不要选择让浏览器记住用户名和密码，路由器设置完成后关闭浏览器。为避免忘记用户名密码的不便，请书面记录并妥善保存。（TP-LINK产品已提供用户名密码记录便签，敬请使用。）


-------------------------answer 7 via  -------------------------


这个可以说 有被黑的风险的 现在流传的黑客神器 zANIT dsploit这样的神器就可以傻瓜式的操作了。诸如中间人 扫描等等操作。


-------------------------answer 8 via  -------------------------


有的。不过一般很少。。你可以自己经常查查！！看有没有人蹭你的网！



-------------------------answer 9 via  -------------------------


看了这文章后有点疑惑想请教几个问题。1，你是怎么有权限抓取登录路由器的请求.你不是得首先远程诊断或者telnet连接路由器吗？2，你怎么知道别人的密码YWRtaW46YWRtaW4= 是base64加密的，然后既然使用Base64解密开查看内容：admin:admin。为什么还要编写了一个python脚本将字典中的密码与“admin:”进行组合然后进行base64加密，进行破解呢？
