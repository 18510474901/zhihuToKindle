


python利用try函数处理异常后不能继续运行? - Python - 知乎






--------------------Link http://www.zhihu.com/question/39814154 ----------------------





--------------------Detail----------------------

import urllib
import os,sys

ip = sys.argv[1]
openfile = open(ip,'r')
for read in openfile.readlines():
    read = read.strip()
    try:
        req=urllib.urlopen("http://"+read)
    except:
        print "error"
    else:
    info = req.info()
    print info
我在终端试运行，总是只有一次输出，不能继续，必须按ctrl+c才能继续运行，求解决办法，多谢！

-------------------------answer 0 via  -------------------------


把else改掉


-------------------------answer 1 via  -------------------------


我猜你的第二个IP写错了。运行到 req=urllib.urlopen("http://"+read) 这里时，指定地址无法正常提供服务，函数在这里阻塞等待超时。ctrl+c 会使 阻塞的 urlopen 抛出异常，然后就能继续获取后面的了。你把 req=urllib.urlopen("http://"+read) 改成  req=urllib.urlopen("http://"+read， timeout=5), 应该就能很快的看到了超时的异常了。 


-------------------------answer 2 via  -------------------------


在except段最后加一个continue，继续执行
